<HTML
><HEAD
><TITLE
>Glibc Installation HOWTO</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><link rel="stylesheet" href="../bookstyle.css"></HEAD
><BODY
CLASS="book"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="BOOK"
><A
NAME="Glibc-Install-Mini-Howto"
></A
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="title"
><A
NAME="AEN2"
></A
>Glibc Installation HOWTO</H1
><H3
CLASS="author"
><A
NAME="AEN4"
></A
>Kai Schlachter</H3
><DIV
CLASS="affiliation"
><DIV
CLASS="address"
><P
CLASS="address"
><br>
<TT
CLASS="email"
>&#60;<A
HREF="mailto:linux (at) murphyslantech.de"
>linux (at) murphyslantech.de</A
>&#62;</TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P
></DIV
></DIV
><P
CLASS="pubdate"
>2004-03-19<BR></P
><DIV
CLASS="revhistory"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Revision History</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Revision 1.01</TD
><TD
ALIGN="LEFT"
>2004-03-19</TD
><TD
ALIGN="LEFT"
>Revised by: KC</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Initial Release, reviewed by LDP</TD
></TR
></TABLE
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>1. <A
HREF="#preface"
>Preface</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="#copyright"
>Copyright</A
></DT
><DT
>1.2. <A
HREF="#history"
>Revision History</A
></DT
><DT
>1.3. <A
HREF="#thanks"
>Thanks</A
></DT
></DL
></DD
><DT
>2. <A
HREF="#introduction"
>Introduction</A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="#why"
>Why?</A
></DT
><DT
>2.2. <A
HREF="#what"
>What?</A
></DT
></DL
></DD
><DT
>3. <A
HREF="#preparations"
>Preparations</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="#stuff-you-will-need"
>Stuff you will need</A
></DT
><DT
>3.2. <A
HREF="#special-things-you-need-to-do"
>Special things you need to do</A
></DT
></DL
></DD
><DT
>4. <A
HREF="#the-install-of-glibc-itself"
>The installation of glibc itself</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="#obtaining-and-compiling-the-source"
>Obtaining and compiling the source</A
></DT
><DT
>4.2. <A
HREF="#the-installation"
>The installation</A
></DT
><DT
>4.3. <A
HREF="#after-the-kernel-is-booted"
>After the kernel is booted...</A
></DT
></DL
></DD
><DT
>5. <A
HREF="#troubleshooting"
>Troubleshooting&#8212;if something goes wrong...</A
></DT
><DD
><DL
><DT
>5.1. <A
HREF="#errors-with-configure-or-make-while-trying-to-compile-the-glibc"
>Errors with <B
CLASS="command"
>configure</B
> or <B
CLASS="command"
>make</B
> 
while trying to compile glibc</A
></DT
><DT
>5.2. <A
HREF="#something-goes-wrong-during-make-install"
>Something goes wrong during <B
CLASS="command"
>make install</B
></A
></DT
></DL
></DD
></DL
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="preface"
></A
>Chapter 1. Preface</H1
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="copyright"
></A
>1.1. Copyright</H1
><P
>Copyright (c) 2004 by Kai Schlachter</P
><P
>Permission is granted to copy, distribute and/or modify this document
      under the terms of the GNU Free Documentation License, Version 1.2
      or any later version published by the Free Software Foundation;
      with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
      Texts.  A copy of the license is located at <A
HREF="http://www.gnu.org/licenses/fdl.html"
TARGET="_top"
>http://www.gnu.org/licenses/fdl.html</A
>.</P
></DIV
><DIV
CLASS="sect1"
><HR><H1
CLASS="sect1"
><A
NAME="history"
></A
>1.2. Revision History</H1
><P
>&#13;<P
></P
><UL
><LI
><P
>v1.01: Fixed some missplaced quotation marks</P
></LI
></UL
>
</P
></DIV
><DIV
CLASS="sect1"
><HR><H1
CLASS="sect1"
><A
NAME="thanks"
></A
>1.3. Thanks</H1
><P
>I especially want to thank Nico Schmoigl for helping me get
my crashed system back up after I ran <B
CLASS="command"
>make install</B
> for 
glibc while my system was still fully running. This was the main reason I wrote this mini-HOWTO.
</P
><P
>Thanks also go to all the other people who helped me along the way; getting the HOWTO in correct format, finding all the typos, etc.</P
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="introduction"
></A
>Chapter 2. Introduction</H1
><P
>In this HOWTO I will explain how you install a new version
of <SPAN
CLASS="productname"
>glibc</SPAN
> on your system.</P
><P
>I wrote this manual because I want to save others from the
problems I encountered.</P
><P
>This HOWTO is a kind of guideline, made up from settings and ways of 
doing things that worked out for me. No liability for the contents of this document can be accepted. Use the concepts, examples and other content at your own risk.  You are strongly recommended to make a backup of your system before major installations and backups at regular intervals.</P
><P
>If you have any suggestions, found another bug in some
distribution and how to fix it, please let me know by writing me
an e-mail: <TT
CLASS="email"
>&#60;<A
HREF="mailto:linux_at_murphyslantech.de"
>linux_at_murphyslantech.de</A
>&#62;</TT
>.</P
><DIV
CLASS="sect1"
><HR><H1
CLASS="sect1"
><A
NAME="why"
></A
>2.1. Why?</H1
><P
>&#13;Yes, that's a good question. Why would you need to install a new
glibc? Well, there are several reasons:
<P
></P
><UL
><LI
><P
>you are a developer and you need the new functions of the library</P
></LI
><LI
><P
>you wanted to compile a new program that needs the new library</P
></LI
><LI
><P
>you like the thrill of errors and bugs in new versions ;-)</P
></LI
></UL
>
</P
></DIV
><DIV
CLASS="sect1"
><HR><H1
CLASS="sect1"
><A
NAME="what"
></A
>2.2. What?</H1
><P
>&#13;If you do not know what glibc is by now, don't worry! When I
first had problems with a new program I wanted to compile, I only
knew that my version of glibc was not sufficient for the
compile.  Now that I know more, I will try to explain in a very simple way what
glibc does.</P
><P
>The glibc package contains a library written in the
programming language of C.  Libraries are a very useful thing in programming;
instead of inventing the wheel from scratch for operations such as
computing the square-root of a number, such common functions
are stored in separate files&#8212;the so-called libraries.
When a new version of a library is published it often contains
some new functions, uses more efficient algorithms for already
implemented functions, and so on.</P
><P
>This is the reason why some programs complain about an older
version of glibc: the current version just does not contain all the functions
the program needs in order to run.</P
><P
>I know this is not technically correct in all detail, but it
gives you a basic understanding of the architecture behind.</P
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="preparations"
></A
>Chapter 3. Preparations</H1
><P
>&#13;As an installation of glibc is not an easy task.  You need to do a lot of things in advance, especially in the event that something goes
wrong. (That is what happened to me on my first glibc install, and I did not make any preparations.)</P
><DIV
CLASS="sect1"
><HR><H1
CLASS="sect1"
><A
NAME="stuff-you-will-need"
></A
>3.1. Stuff you will need</H1
><P
>Basically, you need two different things: software that is already running on your machine (eg., pre-installed by your distribution) and packages 
of source-code for different programs.</P
><DIV
CLASS="sect2"
><HR><H2
CLASS="sect2"
><A
NAME="software-you-will-need"
></A
>3.1.1. Software you will need</H2
><P
>&#13;<P
></P
><UL
><LI
><P
>a running <SPAN
CLASS="productname"
>gcc</SPAN
></P
></LI
><LI
><P
>an older version of <SPAN
CLASS="productname"
>glibc</SPAN
> ;-)</P
></LI
><LI
><P
><SPAN
CLASS="productname"
>GNU-binutils</SPAN
></P
></LI
><LI
><P
><SPAN
CLASS="productname"
>GNU-make</SPAN
></P
></LI
><LI
><P
>the <SPAN
CLASS="productname"
>GNU-core-utils</SPAN
></P
></LI
><LI
><P
><SPAN
CLASS="productname"
>GNU-tar</SPAN
></P
></LI
><LI
><P
><SPAN
CLASS="productname"
>bash</SPAN
> or any shell you prefer</P
></LI
><LI
><P
>very useful but not a must: <SPAN
CLASS="productname"
>Midnight Commander</SPAN
></P
></LI
><LI
><P
>an editor you like (<SPAN
CLASS="productname"
>vi, jed</SPAN
>, etc.)</P
></LI
></UL
>
</P
></DIV
><DIV
CLASS="sect2"
><HR><H2
CLASS="sect2"
><A
NAME="sources-you-will-need"
></A
>3.1.2. Sources you will need</H2
><P
>&#13;<P
></P
><UL
><LI
><P
><SPAN
CLASS="productname"
>bash</SPAN
>or the shell you like</P
></LI
><LI
><P
><SPAN
CLASS="productname"
>GNU-tar</SPAN
></P
></LI
><LI
><P
><SPAN
CLASS="productname"
>GNU-core-utils</SPAN
></P
></LI
><LI
><P
><SPAN
CLASS="productname"
>GNU-make</SPAN
></P
></LI
><LI
><P
>of course:<SPAN
CLASS="productname"
>glibc</SPAN
></P
></LI
><LI
><P
>possibly: <SPAN
CLASS="productname"
>gcc</SPAN
></P
></LI
></UL
>
</P
></DIV
></DIV
><DIV
CLASS="sect1"
><HR><H1
CLASS="sect1"
><A
NAME="special-things-you-need-to-do"
></A
>3.2. Special things you need to do</H1
><P
>Since you are going to substitute the basic library many programs
rely on, you can imagine the problems that may occur.</P
><P
>For me, it so happened that everything went fine until I typed in
<B
CLASS="command"
>make install</B
>.  At about halfway through the installation
process I got an error telling me that <B
CLASS="command"
>rm</B
> was not able to 
run, and I found out that even all the common commands like 
<B
CLASS="command"
>cp</B
>, <B
CLASS="command"
>ls</B
>, <B
CLASS="command"
>mv</B
>, 
<B
CLASS="command"
>ln</B
>, <B
CLASS="command"
>tar</B
>, etc., did not work; all told me
that they were not able to find parts of the library they needed.</P
><P
>But there is help available.  You can force the compilation of
programs with the libraries compiled into them, so the programs do not need
to look them up from the library.</P
><P
>For that reason, in this chapter, we will compile all the
utilities we need for the install into a static version.</P
><DIV
CLASS="sect2"
><HR><H2
CLASS="sect2"
><A
NAME="things-you-will-definitely-need"
></A
>3.2.1. Things you will definitely need</H2
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="the-gnu-binutils"
></A
>3.2.1.1. The GNU-Binutils</H3
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>Get the newest version from: <A
HREF="ftp.gnu.org/gnu/binutils"
TARGET="_top"
>ftp.gnu.org/gnu/binutils</A
>; at the time of writing, this was version 2.14</P
></LI
><LI
><P
>Open the package: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xIvf binutils-2.14.tar.bz2</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Change to the directory: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cd binutils-2.14</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Configure the Makefiles: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Compile the sources: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Install them with: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
></OL
>
</P
><P
>&#13;If you run into trouble with the compilation of the binutils,
referring to problems with gettext (indicated by errors like:
<SPAN
CLASS="QUOTE"
>"undeclared reference to lib_intl"</SPAN
> or similar) please install the
newest version, available from <A
HREF="ftp.gnu.org/gnu/gettext"
TARGET="_top"
>ftp.gnu.org/gnu/gettext</A
>.</P
><P
>If this does not help, try disabling the native-language support by using: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure --no-nls</PRE
></FONT
></TD
></TR
></TABLE
></P
><P
>You don't need to build a static version of the binutils, though it
would not hurt, but I encountered many systems running with very
old versions and ran into errors almost every time, so I think it
is a good idea to mention them here.</P
></DIV
><DIV
CLASS="sect3"
><HR><H3
CLASS="sect3"
><A
NAME="gnu-make"
></A
>3.2.1.2. GNU make</H3
><P
>The <B
CLASS="command"
>make</B
> command is responsible for the compiling of the sources, calling gcc and all the other programs needed for a compile.
Since you may need to compile something if a problem occurs with the new glibc, it is a good idea to have it
static, otherwise it might not work after an error appears.</P
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>Download the source from <A
HREF="ftp.gnu.org/gnu/make/"
TARGET="_top"
>ftp.gnu.org/gnu/make/</A
>; at the time of writing the current version was 3.80</P
></LI
><LI
><P
>Unpack the source, eg.: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xIvf make-3.80.tar.bz2</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Change to the created directory: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cd make-3.80</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Take care that the binaries are built static: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>export CFLAGS="-static -O2 -g"</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Run the configure script: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Compile the stuff: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Install the binaries: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Make a check:<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make -v</PRE
></FONT
></TD
></TR
></TABLE
> You should now see the new version installed.  If not, check for older binary files and replace them by smlinks to the new version.</P
></LI
></OL
>
</P
><P
>&#13;Congratulations! You have compiled another static-linked program.
</P
></DIV
><DIV
CLASS="sect3"
><HR><H3
CLASS="sect3"
><A
NAME="gnu-core-utils"
></A
>3.2.1.3. the GNU core-utils</H3
><P
>The core-utils are commands like: <B
CLASS="command"
>cp</B
>, <B
CLASS="command"
>rm</B
>, <B
CLASS="command"
>ln</B
>, <B
CLASS="command"
>mv</B
>, etc. In case of an
error in the installation, these are an absolute requirement to
help bring your system up again, so static binaries are really necessary
here.</P
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>Again, download the source tarball from: <A
HREF="ftp.gnu.org/gnu/coreutils/"
TARGET="_top"
>ftp.gnu.org/gnu/coreutils/</A
>; at the time of writing, version 5.0 was current.</P
></LI
><LI
><P
>Unpack it: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xIvf coreutils-5.0.tar.bz2</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Change to the directory: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cd coreutils-5.0</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Take care that the binaries are built static:<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>export CFLAGS="-static -O2 -g"</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Configure the package: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Compile the binaries: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>And install them: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Verify that the right core-utils are used: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cp --version</PRE
></FONT
></TD
></TR
></TABLE
>.  You should see the correct version, otherwise remove any old binaries and replace them with symlinks to the new version.</P
></LI
></OL
>
</P
><P
>&#13;Now that the binaries of these very elementary tools are static,
you can be sure they will work every time you need them.
</P
></DIV
><DIV
CLASS="sect3"
><HR><H3
CLASS="sect3"
><A
NAME="gnu-tar"
></A
>3.2.1.4. GNU tar</H3
><P
>You have already used GNU tar to unpack all the programs compiled
and installed so far. But maybe you need to compile another
program which is needed by glibc after you had a crash, and in
this situation (I experienced this myself!) it is very useful to
have a working <B
CLASS="command"
>tar</B
> ready to unpack the missing programs.
With tar, we also need to take care of the
bz2 compression algorithm, which is not included in the normal
source distribution of tar.</P
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>Get the source of GNU tar from <A
HREF="ftp.gnu.org/gnu/tar"
TARGET="_top"
>ftp.gnu.org/gnu/tar</A
>; at the time of writing, version 1.13 was up-to-date.</P
></LI
><LI
><P
>As many source tarballs are compressed with bzip2, we would like to have the support built in, rather than working with pipes, so get the patch from:
    <A
HREF="ftp://infogroep.be/pub/linux/lfs/lfs-packages/4.1/tar-1.13.patch"
TARGET="_top"
>ftp://infogroep.be/pub/linux/lfs/lfs-packages/4.1/tar-1.13.patch</A
>.
    </P
></LI
><LI
><P
>Unpack the source by invoking: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xzvf tar-1.13.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Copy the patch to the source directory of tar: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cp tar-1.13.patch tar-1.13/</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Apply the patch: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>patch -Np1 -i tar-1.13.patch</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Set the compiler flags to make a static binary: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>export CFLAGS="-static -O2 -g"</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Now we are ready to configure: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Compile with: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>And as the next step, install the package:<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Do a quick check to ensure the new version is being used from now on: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar --version</PRE
></FONT
></TD
></TR
></TABLE
>  The version you just installed should display, otherwise 
    check for old binaries and replace them with symlinks to the new location.</P
></LI
></OL
></P
><P
>If you experience problems with the execution of <B
CLASS="command"
>make</B
>, try to turn
off native-language support (nls).  You may achieve this by
invoking configure with the option: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>--disable-nls</PRE
></FONT
></TD
></TR
></TABLE
></P
><P
><EM
>Note:</EM
> In this new version of tar, you must use the <TT
CLASS="option"
>-j</TT
> switch to
decompress .bzip2 files, so instead of <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xIvf anyfile.tar.bz2</PRE
></FONT
></TD
></TR
></TABLE
> you now have to use <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xjvf anyfile.tar.bz2</PRE
></FONT
></TD
></TR
></TABLE
> I
do not know why this was changed, but it works fine.</P
></DIV
><DIV
CLASS="sect3"
><HR><H3
CLASS="sect3"
><A
NAME="the-bash"
></A
>3.2.1.5. The Bash shell</H3
><P
>&#13;I prefer Bash as my shell; if you use a different one, please be sure you have installed a static version of it before you install glibc.</P
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>Get Bash from: <A
HREF="ftp.gnu.org/gnu/bash/"
TARGET="_top"
>ftp.gnu.org/gnu/bash/</A
>. Download the newest
  version you can find; at the time of writing this was version 2.05b.</P
></LI
><LI
><P
>Unpack the source tree: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xzvf bash-2.05b.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
> which
  will create a directory called <TT
CLASS="filename"
>bash-2.05b</TT
> with all the unpacked sources in it.</P
></LI
><LI
><P
>Go to the directory: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cd bash-2.05a</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Set everything up for building a static version:  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>export CFLAGS="-static -O2 -g"</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Configure the makefiles: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure</PRE
></FONT
></TD
></TR
></TABLE
> If you would like something special in your Bash, see <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure --help</PRE
></FONT
></TD
></TR
></TABLE
>
  for a list of options.</P
></LI
><LI
><P
>Compile everything: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Install the compiled binaries: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
> This will install the binaries to <TT
CLASS="filename"
>/usr/local/bin/</TT
>.</P
></LI
><LI
><P
>Make sure there is not another version laying around (like in my Suse-Linux: <TT
CLASS="filename"
>/bin/</TT
>), by copying the file:
  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cp /usr/local/bin/bash /bin/</PRE
></FONT
></TD
></TR
></TABLE
> We don't use a symlink here because both at boot-time and when starting Bash there might be trouble with symlinks.
  </P
></LI
></OL
>
</P
><P
>You now have installed a static version of Bash.  For that reason,
the binary is much bigger than usual, but it will run under all
circumstances.</P
><P
>&#13;If you prefer to use another shell, you are free to do so, but make
sure it is a statically-linked version. Feel free to email me a method to
build the shell of your choice in a static version, and chances are good
that it will be implemented in the next revision of this document.
</P
></DIV
></DIV
><DIV
CLASS="sect2"
><HR><H2
CLASS="sect2"
><A
NAME="software-that-may-come-in-handy"
></A
>3.2.2. Software that may come in handy</H2
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="midnight-commander"
></A
>3.2.2.1. Midnight Commander</H3
><P
>&#13;Midnight Commander is a very useful file manager, supporting
many nice features like transparent decompression of packed files,
built-in copy, move and other common commands, as well as an
integrated editor.</P
><P
>To compile this piece of software, you will need to have glib
installed; in some distributions this is already the case. If you
get an error in the <B
CLASS="command"
>make</B
> command saying that ld could not 
find glib, you will need to install this library first. You can get the sources from:
<A
HREF="ftp.gnome.org/pub/gnome/sources/glib/2.2/"
TARGET="_top"
>ftp.gnome.org/pub/gnome/sources/glib/2.2/</A
>, and the installation is straight-forward.</P
><P
>Here are the steps to build Midnight Commander:</P
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>Get the source from
    <A
HREF="http://www.ibiblio.org/pub/Linux/utils/file/managers/mc/"
TARGET="_top"
>http://www.ibiblio.org/pub/Linux/utils/file/managers/mc/"</A
>;
    at the time of writing, the newest version was 4.6.0.</P
></LI
><LI
><P
>Unpack the sources: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xzvf mc-4.6.0.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Change to the directory you just created: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cd mc-4.6.0</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Set up the configuration-files: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Start compiling: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Install everything: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
></OL
>
</P
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="the-install-of-glibc-itself"
></A
>Chapter 4. The installation of glibc itself</H1
><P
>Now we come to the most important thing: the glibc install.</P
><DIV
CLASS="sect1"
><HR><H1
CLASS="sect1"
><A
NAME="obtaining-and-compiling-the-source"
></A
>4.1. Obtaining and compiling the source</H1
><P
>There are several versions of glibc available, but not in all cases are 
new versions really better than the old ones. The best thing you
can do to find out which works and which ones you should not use is to
check out the different forums on the Internet.  If you have
someone to ask, talk to him about the topic.  Maybe he already has
installed the new version and might be able to tell you that version x.y.z is a
PITA, but version a.b.c works really well!</P
><P
>I decided to install glibc-2.2.4, as I was told it
works well, but it is your decision which one to choose.</P
><P
>Ok, now let's go to work:</P
><P
><P
></P
><OL
TYPE="1"
><LI
><P
>Get the source from <A
HREF="ftp.gnu.org/gnu/glibc/"
TARGET="_top"
>ftp.gnu.org/gnu/glibc/</A
>; as I said, I used version 2.2.4.</P
></LI
><LI
><P
>Unpack the source: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar -xzvf glibc-2.2.4.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>In addition, you will need a package called 
<SPAN
CLASS="QUOTE"
>"linuxthreads,"</SPAN
> found in the <TT
CLASS="filename"
>linuxthreads</TT
> 
directory on
    <A
HREF="ftp.gnu.org"
TARGET="_top"
>ftp.gnu.org</A
>.  The file is called: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>glibc-linuxthreads-2.2.4.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
> Make sure you get the version that 
corresponds to your glibc source tree.</P
></LI
><LI
><P
>Copy the linuxthreads package to your glibc source directory: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cp glibc-linuxthreads-2.2.4.tar.gz glibc-2.2.4</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Change to the glibc directory: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cd glibc-2.2.4</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Unpack linuxthreads: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xzvf linux-threads-2.2.4.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Configure the package:<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure --enable-add-ons=linuxthreads</PRE
></FONT
></TD
></TR
></TABLE
> This will configure the
    package in such a way that the linuxthreads are included in the
    compile; this is necessary for compliance with other
    Linux systems.  For example, programs you compile will probably
    not run on another machine if you forget to include this
    package.</P
></LI
><LI
><P
>Afterwards, start the compilation of glibc:
    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
> This may take some time (about half an hour on my
    Duron XP, running with 1.5 GHz).</P
></LI
></OL
>
</P
><P
>&#13;Now that the library is compiled, everything is ready for the
installation, but things are not as easy this time.
</P
></DIV
><DIV
CLASS="sect1"
><HR><H1
CLASS="sect1"
><A
NAME="the-installation"
></A
>4.2. The installation</H1
><P
>&#13;To install glibc you need a system with nothing running on it,
since many processes (for example sendmail) always try to use the
library and therefore block the files from being replaced.
Therefore we need a <SPAN
CLASS="QUOTE"
>"naked"</SPAN
> system, running nothing except
the things we absolutely need. You can achieve this by passing
the boot option <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>init=/bin/bash</PRE
></FONT
></TD
></TR
></TABLE
> to your kernel. Depending on
your bootloader you may need to do different things. In the following I will explain this using the two most common bootloaders, LILO (LInux-LOader)
and GNU grub, as examples.</P
><DIV
CLASS="sect2"
><HR><H2
CLASS="sect2"
><A
NAME="lilo"
></A
>4.2.1. LILO</H2
><P
>To start the <SPAN
CLASS="QUOTE"
>"only-basics"</SPAN
> system, reboot your computer and
at the LILO prompt enter the kernel image-name you like to load and
append <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>init=/bin/bash</PRE
></FONT
></TD
></TR
></TABLE
> to it before pressing 
<B
CLASS="keycap"
>Return</B
>.
If you are planing to replace your glibc more often, it might be a
good idea to add a separate configuration to your
<TT
CLASS="filename"
>/etc/lilo.conf</TT
>.  For details, refer to the man-page of LILO.</P
></DIV
><DIV
CLASS="sect2"
><HR><H2
CLASS="sect2"
><A
NAME="grub"
></A
>4.2.2. Grub</H2
><P
>Grub is a newer bootloader, with enhanced support for different
operating systems and and file system types (eg. it supports booting from
reiserfs partitions).  If you would like to know more go to:
<A
HREF="http://www.gnu.org/software/grub/"
TARGET="_top"
>http://www.gnu.org/software/grub/</A
>, where you will find all the stuff you need.</P
><P
>If you already have Grub installed, you probably use the
text-based front-end to select the kernel you prefer to boot. Grub
has a nice feature&#8212;instead of returning to doing everything by
hand, you can simply select your entry and type <B
CLASS="keycap"
>e</B
>, which will
bring up an option menu. In this menu you will see the commands Grub
executes prior to booting the kernel. Simply select the line saying
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>kernel="/where/your-kernel-is and-options-are"</PRE
></FONT
></TD
></TR
></TABLE
> and press 
<B
CLASS="keycap"
>e</B
> again.  Now you can edit this line. Here you just add
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>init=/bin/bash</PRE
></FONT
></TD
></TR
></TABLE
> and after pressing <B
CLASS="keycap"
>Return</B
> to 
make the changes take effect, press <B
CLASS="keycap"
>b</B
> to start booting.</P
></DIV
></DIV
><DIV
CLASS="sect1"
><HR><H1
CLASS="sect1"
><A
NAME="after-the-kernel-is-booted"
></A
>4.3. After the kernel is booted...</H1
><P
>&#13;...You will find yourself in an absolute minimal bash-environment.</P
><P
>You will not even be asked to enter your username or password!
At this time you are the ultimate super-user; no-one can get
around you because the system is in single-user mode, so be
careful what you are doing.  There are no file-rights set or anything else!</P
><P
>Your prompt will probably look like this: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>init-x.y#</PRE
></FONT
></TD
></TR
></TABLE
>
At this moment your root (/) has been mounted as read-only, thus
you will not be able to write the new library to your hard drive.
To make it <TT
CLASS="varname"
>r/w</TT
>, enter the command:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>mount -o remount,rw /</PRE
></FONT
></TD
></TR
></TABLE
>
If your source is located on another partition you must also
mount it, as it is not done for you (for me this means mounting my
raid system): <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>mount -t reiserfs /dev/md0 /usr/src</PRE
></FONT
></TD
></TR
></TABLE
> As you
see, I defined the file system type, which is needed because 
<B
CLASS="command"
>mount</B
> does not look anything up in <TT
CLASS="filename"
>/etc/fstab</TT
>.</P
><P
>Now you can go to the directory containing the source and type
in: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
></P
><P
>If you like, now might be a good time to pray that everything works out fine... ;-)</P
><P
>If everything went through properly, you will return to your prompt
after the installation without any error message. In all other
cases, please see <A
HREF="#troubleshooting"
>Chapter 5</A
>.</P
><P
>If everything goes fine, run: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>ldconfig -v</PRE
></FONT
></TD
></TR
></TABLE
> to update your
library cache.</P
><P
>Congratulations! The library is successfully installed. Now type
in: <B
CLASS="command"
>mount -o remount,ro /</B
> to ensure that all the data is
written to the hard drive.</P
><P
>Now start the reboot: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>exit</PRE
></FONT
></TD
></TR
></TABLE
>
This will cause an error message saying that you have caused a
kernel-panic. If possible, restart the computer by using
<B
CLASS="keycap"
>CTRL</B
>-<B
CLASS="keycap"
>ALT</B
>-<B
CLASS="keycap"
>DEL</B
>, otherwise use your hardware's reset switch.</P
><P
>Try booting your normal kernel. If everything turns out fine, you
are ready to use the new library.</P
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="troubleshooting"
></A
>Chapter 5. Troubleshooting&#8212;if something goes wrong... </H1
><P
>If you come to this section and you have followed all the instructions
above, you probably encountered the problem of different
Linux distributions, some of which do not keep stuff where it should normally
be, but somewhere else. The Suse Linux distributions are most
famous for such stupid quirks, but there may be others having
similar problems. If you encounter such a thing and you find the
cause for the trouble&#8212;and hopefully a solution&#8212;please let me
know and I will add this to my HOWTO.</P
><P
>I think this section will never really be complete, but I
will list some possible errors and solutions for these issues.</P
><DIV
CLASS="sect1"
><HR><H1
CLASS="sect1"
><A
NAME="errors-with-configure-or-make-while-trying-to-compile-the-glibc"
></A
>5.1. Errors with <B
CLASS="command"
>configure</B
> or <B
CLASS="command"
>make</B
> 
while trying to compile glibc</H1
><P
>Sometimes you get configuration error telling you that, for example, a
requirement is not met&#8212;typical for software or other
library-packages which are to old. I encountered this with a series of
programs, especially during the compile of all the static
software. Normally there should be no problem: get an up-to-date
version of the software or libraries needed and then compile them
according to the description found in the source tree (usually
called <TT
CLASS="filename"
>README</TT
>, <TT
CLASS="filename"
>INSTALL</TT
> or 
something similar).</P
><P
>But there are sometimes cases where this just does not want to work. For
example, I experienced problems compiling a new version of my
binutils (one of the reasons why I mention them in the
requirements), as I needed to compile glibc.
In return, the configure script for the binutils told me, <SPAN
CLASS="QUOTE"
>"Your
glibc is to old!"</SPAN
>  So I thought, <EM
>Here the snake starts eating
its tail</EM
>. Thankfully there is a solution for this problem: if you 
can not take one big step, try taking smaller ones, but more of them.</P
><P
>In my distribution, a glibc with the version number 2.1.1 was
included. To get around the error I tried to compile version
2.1.3, which was no problem. After I installed this version of the
library, I tried to compile the binutils once more, and this time
all the requirements were met.</P
><P
>If you encounter such a <SPAN
CLASS="QUOTE"
>"loop,"</SPAN
> try to find out what 
version of the software required is the minimum, then download that version
(I think that is one of the reasons why so many old versions are
still lying around on the FTP servers). After successfully
compiling and installing, try to build the software that
complained about the version again; in most cases you should now be
able to compile. It may be necessary that you continue to use this method 
to compile missing or old software.
This is what I call <SPAN
CLASS="QUOTE"
>"the long tail of the rat"</SPAN
> or
<SPAN
CLASS="QUOTE"
>"domino-effect."</SPAN
>  You only wanted to do one thing, but you needed
to do many more before you could make the move you wanted to. It
might be very nasty, but there is one good side to it:  afterwards
you can be quite sure that many of the programs which were really
old will replaced by the time you finish your installation.
</P
></DIV
><DIV
CLASS="sect1"
><HR><H1
CLASS="sect1"
><A
NAME="something-goes-wrong-during-make-install"
></A
>5.2. Something goes wrong during <B
CLASS="command"
>make install</B
></H1
><P
>The most common mistake is not to have a set of basic, static tools; 
in this case you can only use the command <B
CLASS="command"
>cd</B
>,
but nothing else. This is the reason why in this HOWTO I have described
in detail how to make those tools static.</P
><P
>The only tool not static is <B
CLASS="command"
>mount</B
> and, for good 
reason in my opinion, it is included in the package of
linux-utils, which also contains <B
CLASS="command"
>login</B
>, 
<B
CLASS="command"
>passwd</B
>, etc.  Since you are
not able to use statically-linked versions in combination with PAM or
other security-related software, it would be unwise to
compile them statically under all circumstances. Of course you are free to do so if you are really sure about what you are doing.</P
><DIV
CLASS="sect2"
><HR><H2
CLASS="sect2"
><A
NAME="going-back-to-a-working-configuration"
></A
>5.2.1. Going back to a working configuration</H2
><P
>The way back to a working configuration is quite simple if you
have the static tools:  go to the directory 
<TT
CLASS="filename"
>/usr/local/lib/</TT
>
and move all the newly installed files into another location (eg.
<TT
CLASS="filename"
>/usr/local/lib/storedaway</TT
>). You may identify them by
looking at their version number, which should be the same as the one from
your glibc installation (in my example all files fitted to
the scheme lib*-2.2.4), and of course by the creation date and
time. It is quite uncommon that two different libraries have the
same version number at the same time&#8212;I, myself, have never
experienced such a thing&#8212;but just to be sure you do not delete
something important to your system, check the date and
time of creation. A very useful tool in this case is the Midnight
Commander, if you have it installed.</P
><P
>You could try to remove the files <TT
CLASS="filename"
>ld-2.2.4.so</TT
> and
<TT
CLASS="filename"
>libc-2.2.4.so</TT
> and run <B
CLASS="command"
>ldconfig -v</B
> afterwards, before
removing all the crashed files.  This will enable you to use at
least most of your programs and in every case you will be able
to run the Midnight Commander.</P
><P
>Do not forget to do at least one <B
CLASS="command"
>ldconfig -v</B
> after you have removed all the files.</P
><DIV
CLASS="sect3"
><HR><H3
CLASS="sect3"
><A
NAME="removing-the-causes-for-the-crashing-of-the-installation"
></A
>5.2.1.1. Removing the causes for the crashing of the installation</H3
><P
>A common cause for problems is that your distribution has stored
all the library files in a different location than the newly-installed
routine will use, thus it often happens that there are two
versions running simultaneously, disturbing each other. In my case,
lots of trouble was caused by a second copy of <TT
CLASS="filename"
>libc6.so</TT
> 
lying around in <TT
CLASS="filename"
>/lib</TT
>, a symbolic link from this file to
the corresponding one in <TT
CLASS="filename"
>/usr/local/lib</TT
> fixes this problem.
</P
></DIV
></DIV
></DIV
></DIV
></DIV
></BODY
></HTML
>