
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lesson 5-3 - Scope Of Variables (set, setq, let, let* etc) &#8212; Learn Elisp For Emacs (Draft In Progress)</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="prev" title="Lesson 5-2 - Working With Buffers (1)" href="../lesson-5-2-working-with-buffers-1/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../lesson-5-2-working-with-buffers-1/" title="Lesson 5-2 - Working With Buffers (1)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Learn Elisp For Emacs (Draft In Progress)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Lesson 5-3 - Scope Of Variables (set, setq, let, let* etc)</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="lesson-5-3-scope-of-variables-set-setq-let-let-etc">
<h1>Lesson 5-3 - Scope Of Variables (set, setq, let, let* etc)<a class="headerlink" href="#lesson-5-3-scope-of-variables-set-setq-let-let-etc" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Scope is an important concept in programming. When is the variable ‘X’ this ‘X’ and not that ‘X’, from where does ‘X’ gets its value, how is ‘X’ changed.</p>
<p>ELisp has 4 different types of scope:</p>
<ul class="simple">
<li><p>global scope</p></li>
<li><p>local scope</p></li>
<li><p>buffer-local scope</p></li>
<li><p>terminal-local scope</p></li>
</ul>
<p>The type of scope that Elisp implements is <em>dynamic</em> scope. The majority of Lisp dialects implement dynamic scope, but they predominately use a different type of scope called <em>lexical</em> scope.</p>
<p>A version of lexical scope is available in Elisp by using a package called ‘cl’. This will not be discussed in this book.</p>
<p>TODO - add a section on dynamic scope in Elisp versus lexical scope in other Lisps</p>
<div class="section" id="global-scope">
<h3>Global Scope<a class="headerlink" href="#global-scope" title="Permalink to this headline">¶</a></h3>
<p>Let’s create a variable with <em>global scope</em>. Edit the file <code class="docutils literal notranslate"><span class="pre">omar-menu.el</span></code> in <code class="docutils literal notranslate"><span class="pre">./emacs.d/omars-dir/</span></code></p>
<p>Add the line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">setq</span> <span class="n">omars</span><span class="o">-</span><span class="n">kills</span> <span class="mi">123</span><span class="p">)</span>
</pre></div>
</div>
<p>and then use the menu <em>Emacs-Lisp -&gt; Evaluate Buffer</em> to execute that file again.</p>
<p>If you now go to <em>*scratch*</em> and evaluate the variable <code class="docutils literal notranslate"><span class="pre">omars-kills</span></code> in it you will see <code class="docutils literal notranslate"><span class="pre">123</span></code>.</p>
<p>The <em>global variable</em> <code class="docutils literal notranslate"><span class="pre">omars-kills</span></code> is available to any line of any function in the programme.</p>
<p>This is what we techies call <strong>A Bad Thing</strong>, or to put it another way <strong>A Really Bad Thing (TM) (C) (R)</strong>.</p>
<p>At least in ELisp you have to explicity make a symbol have global scope - unlike Javascript where you can make a global scope variable by accident.</p>
</div>
<div class="section" id="the-dastardly-nature-of-global-scope">
<h3>The Dastardly Nature Of Global Scope<a class="headerlink" href="#the-dastardly-nature-of-global-scope" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="buffer-local-variables">
<h2>Buffer-Local Variables<a class="headerlink" href="#buffer-local-variables" title="Permalink to this headline">¶</a></h2>
<p>We have seen that Elisp has some variables that <em>appear</em> global in scope. We looked at the variable <code class="docutils literal notranslate"><span class="pre">fill-column</span></code> in lesson 2-4 and it appeared to be one such.</p>
<p>If we evaluate <code class="docutils literal notranslate"><span class="pre">fill-column</span></code> in <em>*scratch*</em> we get the value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>fill-column ;;its not in brackets because it is not a function!
70
</pre></div>
</div>
<p>(remember to evaluate an expression in <em>*scratch*</em> use <em>[Crtl]-j</em>)</p>
<p>But if we use <code class="docutils literal notranslate"><span class="pre">describe-variable</span></code> to see the definition of <code class="docutils literal notranslate"><span class="pre">fill-column</span></code> it tells a slightly different story:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>fill-column is a variable defined in `C source code&#39;.
Its value is 70

 Automatically becomes buffer-local when set in any fashion.
 This variable is safe as a file local variable if its value
 satisfies the predicate `integerp&#39;.

Documentation:
*Column beyond which automatic line-wrapping should happen.
Interactively, you can set the buffer local value using C-x f.

You can customize this variable.
</pre></div>
</div>
<p>The thing that should get your eyebrows raised is the phrase <em>buffer-local</em>. What this means is that <code class="docutils literal notranslate"><span class="pre">fill-column</span></code> isn’t actually a <em>global-variable</em> there is a <code class="docutils literal notranslate"><span class="pre">fill-column</span></code> variable for each buffer.</p>
<p>This chapter will look at how that sort of local scope is implemented in Elisp.</p>
<div class="section" id="what-you-have-learned">
<h3>What You Have Learned<a class="headerlink" href="#what-you-have-learned" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="additional-reading">
<h3>Additional Reading<a class="headerlink" href="#additional-reading" title="Permalink to this headline">¶</a></h3>
<p>Richard Stallman laid out the rationale for dynamic binding in a <a class="reference external" href="http://www.gnu.org/software/emacs/emacs-paper.html#SEC15">paper</a> he wrote for the ACM Conference on Text Processing.</p>
</div>
<div class="section" id="extra-activities">
<h3>Extra Activities<a class="headerlink" href="#extra-activities" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Lesson 5-3 - Scope Of Variables (set, setq, let, let* etc)</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#global-scope">Global Scope</a></li>
<li><a class="reference internal" href="#the-dastardly-nature-of-global-scope">The Dastardly Nature Of Global Scope</a></li>
</ul>
</li>
<li><a class="reference internal" href="#buffer-local-variables">Buffer-Local Variables</a><ul>
<li><a class="reference internal" href="#what-you-have-learned">What You Have Learned</a></li>
<li><a class="reference internal" href="#additional-reading">Additional Reading</a></li>
<li><a class="reference internal" href="#extra-activities">Extra Activities</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../lesson-5-2-working-with-buffers-1/"
                          title="previous chapter">Lesson 5-2 - Working With Buffers (1)</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../lesson-5-2-working-with-buffers-1/" title="Lesson 5-2 - Working With Buffers (1)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Learn Elisp For Emacs (Draft In Progress)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Lesson 5-3 - Scope Of Variables (set, setq, let, let* etc)</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010, Gordon Guthrie.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>