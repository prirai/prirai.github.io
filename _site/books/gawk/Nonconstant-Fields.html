<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- 
Copyright (C) 1989, 1991, 1992, 1993, 1996-2005, 2007, 2009-2020 

Free Software Foundation, Inc.



This is Edition 5.1 of GAWK: Effective AWK Programming: A User's Guide for GNU Awk,
for the 5.1.0 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.
A copy of the license is included in the section entitled
"GNU Free Documentation License".

a. The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Nonconstant Fields (The GNU Awk User&rsquo;s Guide)</title>

<meta name="description" content="Nonconstant Fields (The GNU Awk User&rsquo;s Guide)">
<meta name="keywords" content="Nonconstant Fields (The GNU Awk User&rsquo;s Guide)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Reading-Files.html" rel="up" title="Reading Files">
<link href="Changing-Fields.html" rel="next" title="Changing Fields">
<link href="Fields.html" rel="prev" title="Fields">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="/software/gnulib/manual.css">


<link rel="stylesheet" type="text/css" href="../bookstyle.css"></head>

<body lang="en">
<span id="Nonconstant-Fields"></span><div class="header">
<p>
Next: <a href="Changing-Fields.html" accesskey="n" rel="next">Changing Fields</a>, Previous: <a href="Fields.html" accesskey="p" rel="prev">Fields</a>, Up: <a href="Reading-Files.html" accesskey="u" rel="up">Reading Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Nonconstant-Field-Numbers"></span><h3 class="section">4.3 Nonconstant Field Numbers</h3>
<span id="index-fields-4"></span>
<span id="index-field-numbers"></span>

<p>A field number need not be a constant.  Any expression in
the <code>awk</code> language can be used after a &lsquo;<samp>$</samp>&rsquo; to refer to a
field.  The value of the expression specifies the field number.  If the
value is a string, rather than a number, it is converted to a number.
Consider this example:
</p>
<div class="example">
<pre class="example">awk '{ print $NR }'
</pre></div>

<p>Recall that <code>NR</code> is the number of records read so far: one in the
first record, two in the second, and so on.  So this example prints the first
field of the first record, the second field of the second record, and so
on.  For the twentieth record, field number 20 is printed; most likely,
the record has fewer than 20 fields, so this prints a blank line.
Here is another example of using expressions as field numbers:
</p>
<div class="example">
<pre class="example">awk '{ print $(2*2) }' mail-list
</pre></div>

<p><code>awk</code> evaluates the expression &lsquo;<samp>(2*2)</samp>&rsquo; and uses
its value as the number of the field to print.  The &lsquo;<samp>*</samp>&rsquo;
represents multiplication, so the expression &lsquo;<samp>2*2</samp>&rsquo; evaluates to four.
The parentheses are used so that the multiplication is done before the
&lsquo;<samp>$</samp>&rsquo; operation; they are necessary whenever there is a binary
operator<a id="DOCF21" href="#FOOT21"><sup>21</sup></a>
in the field-number expression.  This example, then, prints the
type of relationship (the fourth field) for every line of the file
<samp>mail-list</samp>.  (All of the <code>awk</code> operators are listed, in
order of decreasing precedence, in
<a href="Precedence.html">Operator Precedence (How Operators Nest)</a>.)
</p>
<p>If the field number you compute is zero, you get the entire record.
Thus, &lsquo;<samp>$(2-2)</samp>&rsquo; has the same value as <code>$0</code>.  Negative field
numbers are not allowed; trying to reference one usually terminates
the program.  (The POSIX standard does not define
what happens when you reference a negative field number.  <code>gawk</code>
notices this and terminates your program.  Other <code>awk</code>
implementations may behave differently.)
</p>
<p>As mentioned in <a href="Fields.html">Examining Fields</a>,
<code>awk</code> stores the current record&rsquo;s number of fields in the built-in
variable <code>NF</code> (also see section <a href="Built_002din-Variables.html">Predefined Variables</a>).  Thus, the expression
<code>$NF</code> is not a special feature&mdash;it is the direct consequence of
evaluating <code>NF</code> and using its value as a field number.
</p>
<div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5><a id="FOOT21" href="#DOCF21">(21)</a></h3>
<p>A <em>binary operator</em>, such as &lsquo;<samp>*</samp>&rsquo; for
multiplication, is one that takes two operands. The distinction
is required because <code>awk</code> also has unary (one-operand)
and ternary (three-operand) operators.</p>
</div>
<hr>
<div class="header">
<p>
Next: <a href="Changing-Fields.html" accesskey="n" rel="next">Changing Fields</a>, Previous: <a href="Fields.html" accesskey="p" rel="prev">Fields</a>, Up: <a href="Reading-Files.html" accesskey="u" rel="up">Reading Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
