<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- 
Copyright (C) 1989, 1991, 1992, 1993, 1996-2005, 2007, 2009-2020 

Free Software Foundation, Inc.



This is Edition 5.1 of GAWK: Effective AWK Programming: A User's Guide for GNU Awk,
for the 5.1.0 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.
A copy of the license is included in the section entitled
"GNU Free Documentation License".

a. The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Expression Patterns (The GNU Awk User&rsquo;s Guide)</title>

<meta name="description" content="Expression Patterns (The GNU Awk User&rsquo;s Guide)">
<meta name="keywords" content="Expression Patterns (The GNU Awk User&rsquo;s Guide)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Pattern-Overview.html" rel="up" title="Pattern Overview">
<link href="Ranges.html" rel="next" title="Ranges">
<link href="Regexp-Patterns.html" rel="prev" title="Regexp Patterns">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="/software/gnulib/manual.css">


<link rel="stylesheet" type="text/css" href="../bookstyle.css"></head>

<body lang="en">
<span id="Expression-Patterns"></span><div class="header">
<p>
Next: <a href="Ranges.html" accesskey="n" rel="next">Ranges</a>, Previous: <a href="Regexp-Patterns.html" accesskey="p" rel="prev">Regexp Patterns</a>, Up: <a href="Pattern-Overview.html" accesskey="u" rel="up">Pattern Overview</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Expressions-as-Patterns"></span><h4 class="subsection">7.1.2 Expressions as Patterns</h4>
<span id="index-expressions-6"></span>
<span id="index-patterns-5"></span>

<p>Any <code>awk</code> expression is valid as an <code>awk</code> pattern.
The pattern matches if the expression&rsquo;s value is nonzero (if a
number) or non-null (if a string).
The expression is reevaluated each time the rule is tested against a new
input record.  If the expression uses fields such as <code>$1</code>, the
value depends directly on the new input record&rsquo;s text; otherwise, it
depends on only what has happened so far in the execution of the
<code>awk</code> program.
</p>
<span id="index-comparison-expressions-2"></span>
<span id="index-patterns-6"></span>
<p>Comparison expressions, using the comparison operators described in
<a href="Typing-and-Comparison.html">Variable Typing and Comparison Expressions</a>,
are a very common kind of pattern.
Regexp matching and nonmatching are also very common expressions.
The left operand of the &lsquo;<samp>~</samp>&rsquo; and &lsquo;<samp>!~</samp>&rsquo; operators is a string.
The right operand is either a constant regular expression enclosed in
slashes (<code>/<var>regexp</var>/</code>), or any expression whose string value
is used as a dynamic regular expression
(see section <a href="Computed-Regexps.html">Using Dynamic Regexps</a>).
The following example prints the second field of each input record
whose first field is precisely &lsquo;<samp>li</samp>&rsquo;:
</p>
<span id="index-_002f-_0028forward-slash_0029-5"></span>
<span id="index-forward-slash-_0028_002f_0029-5"></span>
<span id="index-_007e-_0028tilde_0029_002c-_007e-operator-7"></span>
<span id="index-tilde-_0028_007e_0029_002c-_007e-operator-7"></span>
<span id="index-_0021-_0028exclamation-point_0029-11"></span>
<span id="index-exclamation-point-_0028_0021_0029-11"></span>
<div class="example">
<pre class="example">$ <kbd>awk '$1 == &quot;li&quot; { print $2 }' mail-list</kbd>
</pre></div>

<p>(There is no output, because there is no person with the exact name &lsquo;<samp>li</samp>&rsquo;.)
Contrast this with the following regular expression match, which
accepts any record with a first field that contains &lsquo;<samp>li</samp>&rsquo;:
</p>
<div class="example">
<pre class="example">$ <kbd>awk '$1 ~ /li/ { print $2 }' mail-list</kbd>
-| 555-5553
-| 555-6699
</pre></div>

<span id="index-regexp-constants-7"></span>
<span id="index-patterns-7"></span>
<p>A regexp constant as a pattern is also a special case of an expression
pattern.  The expression <code>/li/</code> has the value one if &lsquo;<samp>li</samp>&rsquo;
appears in the current input record. Thus, as a pattern, <code>/li/</code>
matches any record containing &lsquo;<samp>li</samp>&rsquo;.
</p>
<span id="index-Boolean-expressions-1"></span>
<span id="index-patterns-8"></span>
<p>Boolean expressions are also commonly used as patterns.
Whether the pattern
matches an input record depends on whether its subexpressions match.
For example, the following command prints all the records in
<samp>mail-list</samp> that contain both &lsquo;<samp>edu</samp>&rsquo; and &lsquo;<samp>li</samp>&rsquo;:
</p>
<div class="example">
<pre class="example">$ <kbd>awk '/edu/ &amp;&amp; /li/' mail-list</kbd>
-| Samuel       555-3430     samuel.lanceolis@shu.edu        A
</pre></div>

<p>The following command prints all records in
<samp>mail-list</samp> that contain <em>either</em> &lsquo;<samp>edu</samp>&rsquo; or &lsquo;<samp>li</samp>&rsquo;
(or both, of course):
</p>
<div class="example">
<pre class="example">$ <kbd>awk '/edu/ || /li/' mail-list</kbd>
-| Amelia       555-5553     amelia.zodiacusque@gmail.com    F
-| Broderick    555-0542     broderick.aliquotiens@yahoo.com R
-| Fabius       555-1234     fabius.undevicesimus@ucb.edu    F
-| Julie        555-6699     julie.perscrutabor@skeeve.com   F
-| Samuel       555-3430     samuel.lanceolis@shu.edu        A
-| Jean-Paul    555-2127     jeanpaul.campanorum@nyu.edu     R
</pre></div>

<p>The following command prints all records in
<samp>mail-list</samp> that do <em>not</em> contain the string &lsquo;<samp>li</samp>&rsquo;:
</p>
<div class="example">
<pre class="example">$ <kbd>awk '! /li/' mail-list</kbd>
-| Anthony      555-3412     anthony.asserturo@hotmail.com   A
-| Becky        555-7685     becky.algebrarum@gmail.com      A
-| Bill         555-1675     bill.drowning@hotmail.com       A
-| Camilla      555-2912     camilla.infusarum@skynet.be     R
-| Fabius       555-1234     fabius.undevicesimus@ucb.edu    F
</pre><pre class="example">-| Martin       555-6480     martin.codicibus@hotmail.com    A
-| Jean-Paul    555-2127     jeanpaul.campanorum@nyu.edu     R
</pre></div>

<span id="index-BEGIN-pattern-4"></span>
<span id="index-END-pattern"></span>
<span id="index-BEGINFILE-pattern"></span>
<span id="index-ENDFILE-pattern"></span>
<p>The subexpressions of a Boolean operator in a pattern can be constant regular
expressions, comparisons, or any other <code>awk</code> expressions.  Range
patterns are not expressions, so they cannot appear inside Boolean
patterns.  Likewise, the special patterns <code>BEGIN</code>, <code>END</code>,
<code>BEGINFILE</code>, and <code>ENDFILE</code>,
which never match any input record, are not expressions and cannot
appear inside Boolean patterns.
</p>
<p>The precedence of the different operators that can appear in
patterns is described in <a href="Precedence.html">Operator Precedence (How Operators Nest)</a>.
</p>
<hr>
<div class="header">
<p>
Next: <a href="Ranges.html" accesskey="n" rel="next">Ranges</a>, Previous: <a href="Regexp-Patterns.html" accesskey="p" rel="prev">Regexp Patterns</a>, Up: <a href="Pattern-Overview.html" accesskey="u" rel="up">Pattern Overview</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
