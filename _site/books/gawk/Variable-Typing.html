<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- 
Copyright (C) 1989, 1991, 1992, 1993, 1996-2005, 2007, 2009-2020 

Free Software Foundation, Inc.



This is Edition 5.1 of GAWK: Effective AWK Programming: A User's Guide for GNU Awk,
for the 5.1.0 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.
A copy of the license is included in the section entitled
"GNU Free Documentation License".

a. The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Variable Typing (The GNU Awk User&rsquo;s Guide)</title>

<meta name="description" content="Variable Typing (The GNU Awk User&rsquo;s Guide)">
<meta name="keywords" content="Variable Typing (The GNU Awk User&rsquo;s Guide)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Typing-and-Comparison.html" rel="up" title="Typing and Comparison">
<link href="Comparison-Operators.html" rel="next" title="Comparison Operators">
<link href="Typing-and-Comparison.html" rel="prev" title="Typing and Comparison">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="/software/gnulib/manual.css">


<link rel="stylesheet" type="text/css" href="../bookstyle.css"></head>

<body lang="en">
<span id="Variable-Typing"></span><div class="header">
<p>
Next: <a href="Comparison-Operators.html" accesskey="n" rel="next">Comparison Operators</a>, Up: <a href="Typing-and-Comparison.html" accesskey="u" rel="up">Typing and Comparison</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="String-Type-versus-Numeric-Type"></span><h4 class="subsubsection">6.3.2.1 String Type versus Numeric Type</h4>

<p>Scalar objects in <code>awk</code> (variables, array elements, and fields)
are <em>dynamically</em> typed.  This means their type can change as the
program runs, from <em>untyped</em> before any use,<a id="DOCF33" href="#FOOT33"><sup>33</sup></a> to string
or number, and then from string to number or number to string, as the
program progresses.  (<code>gawk</code> also provides regexp-typed scalars,
but let&rsquo;s ignore that for now; see section <a href="Strong-Regexp-Constants.html">Strongly Typed Regexp Constants</a>.)
</p>
<p>You can&rsquo;t do much with untyped variables, other than tell that they
are untyped. The following program tests <code>a</code> against <code>&quot;&quot;</code>
and <code>0</code>; the test succeeds when <code>a</code> has never been assigned
a value.  It also uses the built-in <code>typeof()</code> function
(not presented yet; see section <a href="Type-Functions.html">Getting Type Information</a>) to show <code>a</code>&rsquo;s type:
</p>
<div class="example">
<pre class="example">$ <kbd>gawk 'BEGIN { print (a == &quot;&quot; &amp;&amp; a == 0 ?</kbd>
&gt; <kbd>&quot;a is untyped&quot; : &quot;a has a type!&quot;) ; print typeof(a) }'</kbd>
-| a is untyped
-| unassigned
</pre></div>

<p>A scalar has numeric type when assigned a numeric value,
such as from a numeric constant, or from another scalar
with numeric type:
</p>
<div class="example">
<pre class="example">$ <kbd>gawk 'BEGIN { a = 42 ; print typeof(a)</kbd>
&gt; <kbd>b = a ; print typeof(b) }'</kbd>
number
number
</pre></div>

<p>Similarly, a scalar has string type when assigned a string
value, such as from a string constant, or from another scalar
with string type:
</p>
<div class="example">
<pre class="example">$ <kbd>gawk 'BEGIN { a = &quot;forty two&quot; ; print typeof(a)</kbd>
&gt; <kbd>b = a ; print typeof(b) }'</kbd>
string
string
</pre></div>

<p>So far, this is all simple and straightforward.  What happens, though,
when <code>awk</code> has to process data from a user?  Let&rsquo;s start with
field data.  What should the following command produce as output?
</p>
<div class="example">
<pre class="example">echo hello | awk '{ printf(&quot;%s %s &lt; 42\n&quot;, $1,
                           ($1 &lt; 42 ? &quot;is&quot; : &quot;is not&quot;)) }'
</pre></div>

<p>Since &lsquo;<samp>hello</samp>&rsquo; is alphabetic data, <code>awk</code> can only do a string
comparison.  Internally, it converts <code>42</code> into <code>&quot;42&quot;</code> and compares
the two string values <code>&quot;hello&quot;</code> and <code>&quot;42&quot;</code>. Here&rsquo;s the result:
</p>
<div class="example">
<pre class="example">$ <kbd>echo hello | awk '{ printf(&quot;%s %s &lt; 42\n&quot;, $1,</kbd>
&gt; <kbd>                           ($1 &lt; 42 ? &quot;is&quot; : &quot;is not&quot;)) }'</kbd>
-| hello is not &lt; 42
</pre></div>

<p>However, what happens when data from a user <em>looks like</em> a number?
On the one hand, in reality, the input data consists of characters, not
binary numeric
values.  But, on the other hand, the data looks numeric, and <code>awk</code>
really ought to treat it as such. And indeed, it does:
</p>
<div class="example">
<pre class="example">$ <kbd>echo 37 | awk '{ printf(&quot;%s %s &lt; 42\n&quot;, $1,</kbd>
&gt; <kbd>                        ($1 &lt; 42 ? &quot;is&quot; : &quot;is not&quot;)) }'</kbd>
-| 37 is &lt; 42
</pre></div>

<p>Here are the rules for when <code>awk</code>
treats data as a number, and for when it treats data as a string.
</p>
<span id="index-numeric-2"></span>
<span id="index-strings-5"></span>
<span id="index-POSIX-awk-18"></span>
<p>The POSIX standard uses the term <em>numeric string</em> for input data that
looks numeric.  The &lsquo;<samp>37</samp>&rsquo; in the previous example is a numeric string.
So what is the type of a numeric string? Answer: numeric.
</p>
<p>The type of a variable is important because the types of two variables
determine how they are compared.
Variable typing follows these definitions and rules:
</p>
<ul>
<li> A numeric constant or the result of a numeric operation has the <em>numeric</em>
attribute.

</li><li> A string constant or the result of a string operation has the <em>string</em>
attribute.

</li><li> Fields, <code>getline</code> input, <code>FILENAME</code>, <code>ARGV</code> elements,
<code>ENVIRON</code> elements, and the elements of an array created by
<code>match()</code>, <code>split()</code>, and <code>patsplit()</code> that are numeric
strings have the <em>strnum</em> attribute.<a id="DOCF34" href="#FOOT34"><sup>34</sup></a>
Otherwise, they have
the <em>string</em> attribute.  Uninitialized variables also have the
<em>strnum</em> attribute.

</li><li> Attributes propagate across assignments but are not changed by
any use.
</li></ul>

<p>The last rule is particularly important. In the following program,
<code>a</code> has numeric type, even though it is later used in a string
operation:
</p>
<div class="example">
<pre class="example">BEGIN {
     a = 12.345
     b = a &quot; is a cute number&quot;
     print b
}
</pre></div>

<p>When two operands are compared, either string comparison or numeric comparison
may be used. This depends upon the attributes of the operands, according to the
following symmetric matrix:
</p>
<pre class="verbatim">        +----------------------------------------------
        |       STRING          NUMERIC         STRNUM
--------+----------------------------------------------
        |
STRING  |       string          string          string
        |
NUMERIC |       string          numeric         numeric
        |
STRNUM  |       string          numeric         numeric
--------+----------------------------------------------
</pre>
<p>The basic idea is that user input that looks numeric&mdash;and <em>only</em>
user input&mdash;should be treated as numeric, even though it is actually
made of characters and is therefore also a string.
Thus, for example, the string constant <code>&quot;&nbsp;+3.14&quot;</code><!-- /@w -->,
when it appears in program source code,
is a string&mdash;even though it looks numeric&mdash;and
is <em>never</em> treated as a number for comparison
purposes.
</p>
<p>In short, when one operand is a &ldquo;pure&rdquo; string, such as a string
constant, then a string comparison is performed.  Otherwise, a
numeric comparison is performed.
(The primary difference between a number and a strnum is that
for strnums <code>gawk</code> preserves the original string value that
the scalar had when it came in.)
</p>
<p>This point bears additional emphasis:
Input that looks numeric <em>is</em> numeric.
All other input is treated as strings.
</p>
<p>Thus, the six-character input string &lsquo;<samp>&nbsp;+3.14</samp>&rsquo;<!-- /@w --> receives the
strnum attribute. In contrast, the eight characters
<code>&quot;&nbsp;+3.14&quot;</code><!-- /@w --> appearing in program text comprise a string constant.
The following examples print &lsquo;<samp>1</samp>&rsquo; when the comparison between
the two different constants is true, and &lsquo;<samp>0</samp>&rsquo; otherwise:
</p>
<div class="example">
<pre class="example">$ <kbd>echo ' +3.14' | awk '{ print($0 == &quot; +3.14&quot;) }'</kbd>    <i>True</i>
-| 1
$ <kbd>echo ' +3.14' | awk '{ print($0 == &quot;+3.14&quot;) }'</kbd>     <i>False</i>
-| 0
$ <kbd>echo ' +3.14' | awk '{ print($0 == &quot;3.14&quot;) }'</kbd>      <i>False</i>
-| 0
$ <kbd>echo ' +3.14' | awk '{ print($0 == 3.14) }'</kbd>        <i>True</i>
-| 1
$ <kbd>echo ' +3.14' | awk '{ print($1 == &quot; +3.14&quot;) }'</kbd>    <i>False</i>
-| 0
$ <kbd>echo ' +3.14' | awk '{ print($1 == &quot;+3.14&quot;) }'</kbd>     <i>True</i>
-| 1
$ <kbd>echo ' +3.14' | awk '{ print($1 == &quot;3.14&quot;) }'</kbd>      <i>False</i>
-| 0
$ <kbd>echo ' +3.14' | awk '{ print($1 == 3.14) }'</kbd>        <i>True</i>
-| 1
</pre></div>

<p>You can see the type of an input field (or other user input)
using <code>typeof()</code>:
</p>
<div class="example">
<pre class="example">$ <kbd>echo hello 37 | gawk '{ print typeof($1), typeof($2) }'</kbd>
-| string strnum
</pre></div>

<div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5><a id="FOOT33" href="#DOCF33">(33)</a></h3>
<p><code>gawk</code>
calls this <em>unassigned</em>, as the following example shows.</p>
<h5><a id="FOOT34" href="#DOCF34">(34)</a></h3>
<p>Thus, a POSIX
numeric string and <code>gawk</code>&rsquo;s strnum are the same thing.</p>
</div>
<hr>
<div class="header">
<p>
Next: <a href="Comparison-Operators.html" accesskey="n" rel="next">Comparison Operators</a>, Up: <a href="Typing-and-Comparison.html" accesskey="u" rel="up">Typing and Comparison</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
